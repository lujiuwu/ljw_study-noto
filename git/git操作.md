## 什么是git
> git是一个开源的分布式版本控制系统，用于高效处理任何或大或小的项目
> 使用一个特殊的叫做**仓库**的数据库来记录文件的变化
> **git是C语言开发的**

**仓库**
* 仓库中的每个版本都有一个完整的历史记录，可以看到谁在什么时间修改了哪些文件的哪些内容（`版本控制系统`）
* 在需要的时候还可以将文件回退到目标版本

**版本控制系统**
* 集中式  -- svn，cvs
   `使用简单；但是中央服务器出现故障，其他系统就都无法工作`
* 分布式 -- git
   `在本地修改，在仓库同步`
   

## 集中式与分布式

### 集中式

**工作原理**

所有的版本库是放在`中央服务器中`的，也就是说我们每一次的修改上传都是保存在中央服务器中的。中央服务器就是个大仓库，大家把产品都堆里面，每一次需要改进和完善的时候，需要去仓库里面把文件给提出来，然后再操作

**问题**

* 协同工作时可能造成的提交文件不完整，版本库损坏等问题，A提交，B也提交，C下载的时候可能得到的仅是A,B提交版本中的一部分
* 其次，集中式版本控制系统必须要联网才能工作，不论是局域网还是互联网，必须上网才能将本地版本推送至服务器进行保存


### 分布式管理系统

**工作原理**

分布的含义是指每台计算机上都有一个完整的版本库，这个时候，你的修改仅仅需要提交给本地的版本库进行保存就可以了
分布式版本控制系统中通常也会有一台充当“中央服务器”的计算机，大家都把版本推送到这台计算机上，而需要同步的人只需同步这一台固定的计算机就可以

## git的三个区域

* **工作区** -- 处理工作的区域；`在电脑里看到的目录`
* **暂存区** -- 临时存放的区域；`在.git文件内的index（二进制记录）`
* **本地git仓库/版本库** -- 最终的存放区域；`指的整个.git文件夹`

### 工作区 (Working Directory)

> 工作区是本地计算机上的项目目录，在这里进行文件的创建，修改和删除操作
> 工作区包含了当前项目的所有文件和子目录

* 显示项目的当前状态
* 文件的修改在工作区进行，但这些修改还没有被记录到版本控制中

### 暂存区 (Staging Area)

> 暂存区是一个临时存储区域，它包含了即将被提交到版本库的文件快照，在提交之前可以选择性将工作区的修改添加到暂存区

* 暂存区保存了将被包含在下一个提交中的更改
* 可以使用`git add`命令将文件添加到暂存区直至准备好提交所有更改

### 版本库 (Repository)

> 版本库包含项目的所有版本历史记录，每次提交都会在版本库中创建一个新的快照，这些快照是不可变的，以确保项目的完整历史记录

* 版本库分为`本地版本库和远程版本库`，这里主要指本地版本库
* 本地版本库存储在`.git`目录，包含了所有提交的对象和引用

### 三个区域的关系

* 工作区到暂存区
```git
git add filename
git add . // 添加目录下所有文件
```

* 暂存区到版本库
```git
git commit -m "commit"
```

* 版本库到本地版本库
```git
git push origin branch-name
```

* 远程仓库到本地版本库 `git pull / git fetch`
```git
git pull <远程主机名> <远程分支名>:<本地分支名>

git fetch <远程主机名> <远程分支名>:<本地分支名>
git merge <本地分支名>
```

**关于git pull 和 git fetch**
* `git fetch`是将远程主机的最新内容拉到本地，用户在检查了以后决定是否合并到工作本机分支中
* `git pull` 则是将远程主机的最新内容拉下来后直接合并，即：`git pull = git fetch + git merge`，这样可能会产生冲突，需要手动解决

* 相比起来，git fetch 更安全也更符合实际要求，在 merge 前，我们可以查看更新情况，根据实际情况再决定是否合并


## 命令

### 创建仓库 -- git init

```git
git init // 使用当前目录
git init newrepo // 新建newrepo目录为指定目录
```

* 初始化后，目标目录下会出现一个名为.git的目录，所有git需要的数据和资源都存放在这个目录中

### 拷贝项目 -- git clone

> git clone指令用于从现有Git仓库中拷贝项目（`类似svn checkout`）

```git
git clone <git仓库> <指定本地目录>
```

### 配置项目 -- git config

> git config命令用于打印/编辑git的配置信息

* 显示当前的git配置信息
```git
git config --list
```

* 编辑git配置文件
```git
git config -e // 仅针对当前仓库

git config -e --global // 针对系统上所有仓库
```

* 设置提交代码时的用户信息
```git
git config --global user.name "cy"
git config --global user.email.test@cy.com
```

**如果去掉--global参数 就只针对当前仓库有效**


### 基本操作

> Git 的工作就是创建和保存你项目的快照及与之后的快照进行对比
> Git 常用的是以下 6 个命令：**git clone**、**git push**、**git add** 、**git commit**、**git checkout**、**git pull**

#### 创建仓库

* **git init** -- 初始化仓库
* **git clone** -- 拷贝一份远程仓库，即下载一个项目

#### 修改与提交

##### git add -- 添加文件到暂存区

##### git status -- 查看仓库当前的状态，显示有变更的文件

##### git diff -- 比较工作区，暂存区与版本库的差异

###### 情景一 -- 工作区与暂存区

> git diff命令，默认查看的就是工作区与暂存区的差异

* git diff ：查看工作区与暂存区之间所有文件的差异
* git diff -- file_name ：查看具体某个文件 在工作区和暂存区之间的差异
* git diff -- file1_name file2_name ：查看多个文件在工作区和暂存区之间的差异

###### 情景二 -- 工作区与版本库

**最新版本库**

* git diff HEAD ：查看工作区与最新版本库之间所有的文件差异
* * git diff HEAD -- file_name ：查看工作区与最新版本库之间的 指定文件名的文件差异
* git diff HEAD -- file1_name file2_name ：查看工作区与最新版本库之间的 指定文件名的多个文件差异

**指定版本库**


* git diff 某个具体版本 ：查看工作区与具体某个提交版本之间的所有的文件差异
* git diff 某个具体版本 file_name ：查看工作区与具体某个版本之间的 指定文件名的文件差异
* git diff 某个具体版本 -- file1_name file2_name ：查看工作区与最具体某个版本之间的 指定文件名的多个文件差异






##### git difftool -- 使用外部差异工具查看和比较文件的更改

> 是diff命令的扩展，提供了更直观的可视化工具来解决文件之间的差异，使用于那些更喜欢图形化工具而不是命令行工具来处理文件差异的用户

**命令组成**
* options -- 工具选项
* commit -- 指定要比较的提交，默认为当前工作目录的状态
* path -- 指定要比较的文件路径
```git
// 基本语法:
git difftool [<options>] [<commit> [<path>...]]
```

**常见选项 options**

| **选项**                 | **说明**                               | **用法示例**                            |
| ---------------------- | ------------------------------------ | ----------------------------------- |
| `--tool=<tool>`        | 指定使用的外部差异工具。默认情况下，Git 使用配置的默认差异工具。   | `git difftool --tool=meld`          |
| `--tool-help`          | 显示可用的差异工具列表。                         | `git difftool --tool-help`          |
| `--dir-diff`           | 在目录中进行比较，而不是逐个文件。                    | `git difftool --dir-diff`           |
| `--no-prompt`          | 跳过对每个文件的确认提示，自动使用工具查看差异。             | `git difftool --no-prompt`          |
| `--staged`             | 比较已暂存的更改与上一个提交之间的差异。                 | `git difftool --staged`             |
| `--cached`             | 与 `--staged` 相同，用于比较已缓存的更改与上一个提交的差异。 | `git difftool --cached`             |
| `--merge`              | 用于合并工具，处理冲突时查看差异。                    | `git difftool --merge`              |
| `--find-copies`        | 查找文件复制和移动。                           | `git difftool --find-copies`        |
| `--find-copies-harder` | 更加严格地查找文件复制和移动。                      | `git difftool --find-copies-harder` |
**配置差异工具 -- 结合git config**

```git
git config --global diff.tool meld

git config --global difftool.meld.cmd 'meld "$BASE" "$LOCAL" "$REMOTE" --diff "$MERGED"'
```





##### git range-diff -- 比较两个提交氛围之间的差异





















